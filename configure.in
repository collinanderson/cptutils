dnl Process this file with autoconf to produce a configure script.
dnl $Id: configure.in,v 1.16 2004/09/08 21:07:52 jjg Exp jjg $

AC_INIT(src/Common.mk.in)

MAJOR_VERSION=1
MINOR_VERSION=12
VERSION="$MAJOR_VERSION.$MINOR_VERSION"
CFXTRA="-Wall"

dnl Checks for programs.

AC_PROG_CC
AC_PROG_MAKE_SET
AC_PROG_INSTALL

AC_PATH_PROG(GGO,gengetopt,no)
if test "$GGO" = no; then
  AC_MSG_WARN(no gengetopt! (you should be able to build though))       
fi

AC_PATH_PROG(XML2C,xml2-config,no)
if test "$XML2C" = no; then
  AC_MSG_WARN(no xml2-config! (we cannot build svgcpt)) 
fi

if test "$GCC"x = yesx; then
  CFLAGS="$CFLAGS $CFXTRA"
fi

dnl Checks for libraries.

AC_CHECK_LIB(m,pow)

dnl Checks for header files.

AC_HEADER_STDC
AC_CHECK_HEADERS(unistd.h)
AC_CHECK_HEADERS(glob.h)

dnl Checks for library functions.

AC_CHECK_FUNCS(strdup)
AC_CHECK_FUNCS(getopt)
AC_CHECK_FUNCS(glob)

dnl Output subsitutions

AC_SUBST(VERSION,$VERSION)

dnl Make a config.h

AC_CONFIG_HEADER(src/common/config.h)

dnl Create Makefile data

AC_OUTPUT([Makefile src/Common.mk src/common/version.h])






