# -*- makefile -*-
# Commom Makefile macros
# $Id: Common.mk.in,v 1.17 2012/03/12 16:05:50 jjg Exp jjg $ 

VERSION   = @PACKAGE_VERSION@

CC        = @CC@
CFLAGS   += @CFLAGS@ @DEFS@ 
LDFLAGS  += 
LDLIBS   += @LIBS@

CFLAGS   += -I../common/
LDFLAGS  += -L../common/  

TESTD     = ../t

PYTHON    = @PYTHON@

INSTALL         = @INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@ 
INSTALL_DATA    = @INSTALL_DATA@ 
INSTALL_DIR     = @INSTALL@ -d 
GGO             = @GGO@
XML2C		= @XML2C@
GPERF		= @GPERF@
XSLTP           = @XSLTP@

prefix      = @prefix@
exec_prefix = @exec_prefix@
bindir      = @bindir@
mandir      = @mandir@
datarootdir = @datarootdir@
localedir   = @localedir@

RUBBISH += *~

# generate options code from .ggo

ifneq (no,$(GGO))

%.h %.c : %.ggo
	$(GGO) -u -i $< -f $* -F $*

endif

.SECONDARY : options.c options.h

# generate manpages from docbook source, the location
# of the xsl is as used by Debian/Ubuntu

ifneq (no,$(XSLTP))

MANXSL = /usr/share/xml/docbook/stylesheet/docbook-xsl/manpages/docbook.xsl

%.1 : %.xml ../docbook
	$(XSLTP) --xinclude $(MANXSL) $<

endif